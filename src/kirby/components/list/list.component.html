<ul>
  <ng-container *ngIf="isSectionsEnabled; else normalList">
    <ng-container *ngFor="let section of (items | groupBy:getSectionName)">
        <li>
          <ng-container *ngTemplateOutlet="sectionHeaderTemplate; context: {$implicit: section.name}">
          </ng-container>
        </li>        
        <li *ngFor="let item of section.items" (click)="onItemClick(item)">
            <ng-container *ngFor="let template of listCellTemplates">
              <ng-container *ngTemplateOutlet="template; context: {$implicit: item}">
              </ng-container>
            </ng-container>
          </li>
      </ng-container>  
  </ng-container>

  <ng-template #normalList>
      <li *ngFor="let item of items" (click)="onItemClick(item)">
          <ng-container *ngFor="let template of listCellTemplates">
            <ng-container *ngTemplateOutlet="template; context: {$implicit: item}">
            </ng-container>
          </ng-container>
        </li>
  </ng-template>
</ul>

