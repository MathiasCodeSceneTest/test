<kirby-page title="Virtual Scroll Test">
  <kirby-page-content>
    <h1>This is an example of content in page</h1>
    <p>
      The min and max buffer values depends on how much content is before the viewport. More
      experimentation is needed, but this is a start.
    </p>
    <cdk-virtual-scroll-viewport
      kirbyPageVirtualScrollStrategy
      [minBufferPx]="1080 * 0.5"
      [maxBufferPx]="1080 * 1"
    >
      <section>
        <div *cdkVirtualFor="let item of items; let idx = index">
          <kirby-section-header style="height: 56px; display: block;" *ngIf="item.type === 'header'"
            ><h2>{{ item.content }}</h2></kirby-section-header
          >
          <kirby-item
            *ngIf="item.type === 'item'"
            [class.first-item]="items[idx - 1]?.type === 'header'"
            [class.last-item]="items[idx + 1]?.type === 'header'"
            class="shadow"
          >
            {{ item.content }}
          </kirby-item>
        </div>
      </section>
    </cdk-virtual-scroll-viewport>
  </kirby-page-content>
</kirby-page>
