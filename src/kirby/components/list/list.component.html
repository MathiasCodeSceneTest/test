<ng-container *ngTemplateOutlet="headerTemplate"></ng-container>

<ul>

  <ng-container *ngIf="isSectionsEnabled; else normalList">
      <ng-container *ngFor="let section of items | sectionBy:getSection">
          <li>
            <ng-container *ngTemplateOutlet="sectionHeaderTemplate; context: {$implicit: section.name}">
            </ng-container>
          </li>        
          <li *ngFor="let item of section.items" (click)="onItemClick(item)">
            <ng-container *ngTemplateOutlet="listItemTemplate; context: {$implicit: item}">
            </ng-container>
          </li>
        </ng-container>  
  </ng-container>

  <ng-template #normalList>
      <ng-container *ngFor="let item of items">
        <li (click)="onItemClick(item)">
          <ng-container *ngTemplateOutlet="listItemTemplate; context: {$implicit: item}">
          </ng-container>
        </li>
      </ng-container>  
  </ng-template>
  
</ul>

