@use '~@kirbydesign/core/src/scss/utils';
@use './form-field-inputs.shared' as shared;

$form-field-input-font-family: var(--kirby-font-family);
$form-field-input-line-height: 1.5;
$form-field-input-padding: 1em;
$form-field-label-height: 24px;
$padding-block-size-md: shared.$form-field-input-padding * 0.5;

:host {
  display: block;
  position: relative; // Ensures correct position of cloned child input when Ionic scrollAssist is enabled
  margin-bottom: utils.size('s');

  &.md .input-wrapper {
    border-radius: utils.size('m');
  }

  &.disabled .input-wrapper {
    background-color: utils.get-color('light-tint');
    color: utils.get-text-color('semi-dark');
    box-shadow: none;
  }
}

:host-context(kirby-item) {
  margin-bottom: 0;
}

.texts {
  display: flex;
  justify-content: space-between;
  padding: 2px utils.size('s') 0 utils.size('s');

  .message {
    flex: 75%;

    &:only-child {
      flex-basis: auto;
    }
  }

  .counter {
    flex: 25%;
    text-align: right;
  }
}

label {
  display: block;
}

.text {
  display: block;
  font-size: utils.font-size('s');
  font-weight: utils.font-weight('light');
  line-height: utils.line-height('s');
  margin-bottom: utils.size('xxxs');
  padding: 0 utils.size('s');
}

.input-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: utils.get-color('white');
  color: utils.get-color('white-contrast');
  border: none;
  box-sizing: border-box;
  font-family: $form-field-input-font-family;

  // `font-size` should be declared in `em` units but to simplify the solution
  // to https://github.com/kirbydesign/designsystem/issues/2301 we're using `rem`.
  // Must be fixed by https://github.com/kirbydesign/designsystem/issues/2313
  /* stylelint-disable-next-line selector-pseudo-element-no-unknown */
  ::ng-deep,
  & {
    input[kirby-input] {
      font-size: 1rem;
      line-height: $form-field-input-line-height;
    }
  }

  outline: none;
  margin: 0;
  appearance: none;
  border-radius: utils.size('s');
  box-shadow: utils.get-elevation(2);
  padding: 0 $form-field-input-padding;
  width: 100%;

  &::placeholder,
  .prefix,
  .suffix {
    color: utils.get-text-color('semi-dark');
  }

  .prefix,
  .suffix {
    font-size: utils.font-size('s');
    font-weight: utils.font-weight('light');
    display: flex;
    justify-content: center;
  }

  /* stylelint-disable-next-line selector-pseudo-element-no-unknown */
  .prefix > ::ng-deep * {
    padding-right: $form-field-input-padding * 0.5;
  }

  /* stylelint-disable-next-line selector-pseudo-element-no-unknown */
  .suffix > ::ng-deep * {
    padding-left: $form-field-input-padding * 0.5;
  }

  /* stylelint-disable-next-line selector-pseudo-element-no-unknown */
  ::ng-deep {
    input[kirby-input],
    textarea {
      border: none;
      width: 100%;
      flex-grow: 2;
      box-shadow: none;
      appearance: none;
      padding-left: 0;
      padding-right: 0;
      font-size: 1rem;
      font-family: $form-field-input-font-family;
      line-height: $form-field-input-line-height;
    }

    input[kirby-input],
    textarea[kirby-textarea] {
      &:focus {
        outline: none;
        border: none;
        box-shadow: none;
      }
    }
  }
}
