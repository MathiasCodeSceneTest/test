env:
  global:
  - NODE_VERSION=8
  - EMULATOR_API_LEVEL=25
  - ANDROID_VERSION=25
  - ANDROID_BUILD_TOOLS_VERSION=27.0.3
  - ANDROID_ABI=armeabi-v7a
  - APPIUM_VERSION=1.7.0
  - EMULATOR_NAME=test
  - ANDROID_TAG=google_apis

matrix:
  include:
  - stage: "Build"
    os: osx
    env:
    - Build="iOS"
    osx_image: xcode9.3
    language: node_js
    node_js: "8"
    jdk: oraclejdk8
    before_install:
    - npm install
    script:
    - npm build ios
  - language: android
    node_js: "8"
    os: linux
    env:
    - Build="Android"
    jdk: oraclejdk8
    script:
    - npm build android

android:
  licenses:
  - ".+"

before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock

cache:
  directories:
  - .nvm
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/

install:
- nvm install $NODE_VERSION
- npm install -g typings
- wget -O ./nativescript.tgz "https://s3.amazonaws.com/nativescript-ci/build_result/nativescript.tgz"
- npm install -g nativescript.tgz --ignore-scripts
- tns usage-reporting disable
- tns error-reporting disable